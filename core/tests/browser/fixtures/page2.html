<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Page 2</title>
</head>
<body>
    <h1>Test Page 2</h1>
    <p>This is the second test page for localStorage navigation testing.</p>
    
    <div id="storage-content"></div>
    
    <button id="readData">Read localStorage Data</button>
    <button id="updateData">Update localStorage Data</button>
    <a href="page1.html" id="navToPage1">Navigate to Page 1</a>
    
    <script>
        // Helper functions for localStorage testing
        window.setTestData = function(key, value) {
            localStorage.setItem(key, JSON.stringify(value));
        };
        
        window.getTestData = function(key) {
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : null;
        };
        
        // Set up page-specific data
        window.addEventListener('DOMContentLoaded', function() {
            document.getElementById('readData').addEventListener('click', function() {
                const data = window.getTestData('navigation-test');
                document.getElementById('storage-content').textContent = 'Data read: ' + JSON.stringify(data);
            });
            
            document.getElementById('updateData').addEventListener('click', function() {
                const existingData = window.getTestData('navigation-test') || {};
                const updatedData = {
                    ...existingData,
                    page: 'page2',
                    lastUpdated: Date.now(),
                    message: 'Updated from Page 2'
                };
                window.setTestData('navigation-test', updatedData);
                document.getElementById('storage-content').textContent = 'Data updated: ' + JSON.stringify(updatedData);
            });
            
            // Auto-read existing data on page load
            const existingData = window.getTestData('navigation-test');
            if (existingData) {
                document.getElementById('storage-content').textContent = 'Existing data: ' + JSON.stringify(existingData);
            }
        });
    </script>
</body>
</html>