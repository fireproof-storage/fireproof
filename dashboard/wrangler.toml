name = "fireproof-dashboard"
main = "backend/cf-serve.ts"
compatibility_date = "2025-02-24"
compatibility_flags = ["nodejs_compat"]

vars = { ENVIRONMENT = "test" }
#vars = { ENVIRONMENT = "dev" }
#routes = [
#  { pattern = "dev.connect.fireproof.direct", custom_domain = true }
#]

[assets]
directory = "dist/static"
binding = "ASSETS"
html_handling = "force-trailing-slash"
not_found_handling = "single-page-application" 


[[d1_databases]]
binding = "DB"
database_name = "test-auth-db"
database_id = "ccb4a6c9-a1da-4a3a-9895-86d6eb3ffd26"

#[[d1_databases]]
#binding = "DB"
#database_name = "test-2-db"
#database_id = "e62e4150-0405-4f17-b201-1f242f8c3c94"


[env.staging]
vars = { ENVIRONMENT = "staging" }
route = "staging.connect.fireproof.direct/*"

[[env.staging.d1_databases]]
binding = "DB"
database_name = "fp-connect-staging"
database_id = "374bd02f-9a9d-41da-84bc-9b8582706f9a"

[env.production]
vars = { ENVIRONMENT = "production" }
route = "connect.fireproof.direct/*"


[[env.production.d1_databases]]
binding = "DB"
database_name = "fp-connect-production"
database_id = "we-need-a-id-here"


